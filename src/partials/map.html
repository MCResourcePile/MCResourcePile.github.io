{{#data}}
{{#withSort maps "name"}}
{{#if download}}
{{> map-thumbnail}}
{{else}}
{{#if sourced}}
{{#is sourced true}}
<div id="{{slug}}" class="no-download"></div>
{{else}}
{{> map-thumbnail}}
{{/is}}
{{/if}}
{{/if}}
{{/withSort}}
{{/data}}
<div class="modal fade" id="download-starting-message" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Your download will begin shortly.</h4>
            </div>
            <div class="modal-body">
                Please wait while we compile your download.
                <div class="progress">
                    <div id="compile-progress" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <hr>
                You currently have <span class="api-request-remaining"></span> out of <span class="api-request-limit"></span> requests left to the GitHub API.<br>
                This means that you can download approximately <spawn class="api-request-approximate"></spawn> more maps before you must wait an hour for the limit to reset.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="download-complete-message" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Your download has begun.</h4>
            </div>
            <div class="modal-body">
                Thank you for downloading this map from ResourcePile and supporting free public maps as well as the map authors.<br><br>
                This map is licensed under a Creative Commons license which has been included in your download. Please respect this license and the wishes of the map authors as this project would not be here without them.
                <hr>
                You currently have <span class="api-request-remaining"></span> out of <span class="api-request-limit"></span> requests left to the GitHub API.<br>
                This means that you can download approximately <spawn class="api-request-approximate"></spawn> more maps before you must wait an hour for the limit to reset.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="download-opened" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Your download has been opened in a new window.</h4>
            </div>
            <div class="modal-body">
                You have been directed to the location of the original download for this map. Please note that if using this map on a server running the Project Ares PGM plugin that there may be unresolved errors. As we have no control over these downloads we cannot fix these problems and hold no responsibility towards them.
                <hr>
                You currently have <span class="api-request-remaining"></span> out of <span class="api-request-limit"></span> requests left to the GitHub API.<br>
                This means that you can download approximately <spawn class="api-request-approximate"></spawn> more maps before you must wait an hour for the limit to reset.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="download-error-message" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Your download failed.</h4>
            </div>
            <div class="modal-body">
                Something went wrong while compiling your download. Please try again, but if the issue persists please report an issue on our <a href="https://github.com/MCResourcePile/MCResourcePile.github.io/issues/new" target="_blank">Issues Tracker</a>.
                <hr>
                You currently have <span class="api-request-remaining"></span> out of <span class="api-request-limit"></span> requests left to the GitHub API.<br>
                This means that you can download approximately <spawn class="api-request-approximate"></spawn> more maps before you must wait an hour for the limit to reset.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="download-rate-limit-message" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">You've hit the rate limit</h4>
            </div>
            <div class="modal-body">
                Looks like you've hit GitHub's rate limit. <a href="/admin/auth">Authenticate your download with GitHub</a> if you would like to download more maps now. Alternatively you can wait an hour for your rate to reset.
                <hr>
                You currently have <span class="api-request-remaining"></span> out of <span class="api-request-limit"></span> requests left to the GitHub API.<br>
                This means that you can download approximately <spawn class="api-request-approximate"></spawn> more maps before you must wait an hour for the limit to reset.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
