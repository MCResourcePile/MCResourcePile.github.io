{{> header}}
<div class="container">
	<div class="content-header">
        {{> alert}}
		<div class="content-title">Public Map Listing</div>
		<div class="content-subtitle">
			A collection of publicly downloadable maps from the <a href="http://avicus.net">Avicus Network</a>.
		</div>
	</div>
	<!-- Game mode navigation menu -->
	<form name="search_form" class="record-search-container">
		<input type="search" id="search" name="s" value="" class="form-control record-search-box" placeholder="Search maps">
	</form>
	<div class="game-mode-navigation row">
		<div class="col-xs-6 col-md-3">
			<div class="game-mode-section-header">Objectives</div>
			<a class="game-mode-button game_ctf" href="?s=ctf"></a>
			<a class="game-mode-button game_ctw" href="?s=ctw"></a>
			<a class="game-mode-button game_dtm" href="?s=dtm"></a>
			<a class="game-mode-button game_dtc" href="?s=dtc"></a>
			<a class="game-mode-button game_koth" href="?s=koth"></a>
		</div>
		<div class="col-xs-6 col-md-3">
			<div class="game-mode-section-header">Deathmatch</div>
			<a class="game-mode-button game_frenzy" href="?s=frenzy"></a>
			<a class="game-mode-button game_skywars" href="?s=skywars"></a>
			<a class="game-mode-button game_tdm" href="?s=tdm"></a>
		</div>
		<div class="col-xs-6 col-md-3">
			<div class="game-mode-section-header">Competitive</div>
			<a class="game-mode-button game_tournament" href="?s=tournament"></a>
		</div>
		<div class="col-xs-6 col-md-3">
			<div class="game-mode-section-header">Other</div>
			<a class="game-mode-button game_all" href="?s=" ></a>
			<a class="game-mode-button game_arcade" href="?s=arcade"></a>
			<span class="game-mode-button">Licenses:</span>
			<a class="game-mode-button license_by_nc_sa" href="?s=by-nc-sa"></a>
			<a class="game-mode-button license_by_sa" href="?s=by-sa"></a>
		</div>
	</div>
	<div class="total-maps center"></div>
	<div id="maps-output" class="maps-output">
		<div class="dynamic">
		{{#with data}}
        {{#maps}}
            {{> map}}
		{{/maps}}
		{{/with}}
		</div>
	</div>
    <div class="modal fade" id="download-starting-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Your download will begin shortly...</h4>
                </div>
                <div class="modal-body">
                    Please wait while we compile your download.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="download-complete-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Your download has begun...</h4>
                </div>
                <div class="modal-body">
                    Thank you for downloading this map from ResourcePile and supporting free public maps as well as the map authors.<br><br>
                    This map is licensed undera Creative Commons license which has been included in your download. Please respect this license and the wishes of the map authors as this project would not be here without them.
                    <hr>
                    You currently have <span id="api-request-remaining"></span> out of <span id="api-request-limit"></span> requests left to the GitHub API.<br>
                    This means that you can download approximately <spawn id="api-request-approximate"></spawn> more maps before you must wait an hour for the limit to reset.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="download-error-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Your download filed...</h4>
                </div>
                <div class="modal-body">
                    Something went wrong while compiling your download. Please try again, but if the issue persists please report an issue on our <a href="https://github.com/MCResourcePile/MCResourcePile.github.io/issues/new" target="_blank">Issues Tracker</a>.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="download-rate-limit-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">You've hit the rate limit</h4>
                </div>
                <div class="modal-body">
                    Looks like you've hit GitHub's rate limit. Sadly there isn't anything we can do about that at the moment, but we are looking for solutions. Please try again in an hour.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
	var data=location.search;
	if(data) {
		data=location.search.substring(1);
		data=data.split('&');
		var pairs={};
		for(var i=0; i<data.length; i++){
			var tmp=data[i].split('=');
			pairs[tmp[0]]=tmp[1];
		}
		var f = document.search_form;
		for (var i in pairs) {
			if(f.elements[i]) {f.elements[i].value = pairs[i];}
		}
	}
</script>
{{> footer}}
</body>
</html>
