{{> header}}
<div class="container">
    <div class="content-header">
        {{> alert}}
        <div class="content-title">Public Map Listing</div>
        <div class="content-subtitle">
            A collection of publicly downloadable maps created for <a href="https://github.com/OvercastNetwork/ProjectAres">PGM</a>.
        </div>
    </div>
    <div class="content-alert">
        <div class="alert alert-info" style="overflow-x:hidden" role="alert">
            <p>If you are looking for maps from the Overcast Network, please look through our <a href="../overcast" class="underline">Overcast Map Collection</a>.</p>
        </div>
    </div>
    <br>
    <!-- Game mode navigation menu -->
    <form name="search_form" class="record-search-container">
        <input type="search" id="search" name="s" value="" class="form-control record-search-box" placeholder="Search maps">
    </form>
    <div class="game-mode-navigation row">
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Objectives</div>
            <a class="game-mode-button game-ctf" href="?s=ctf"></a>
            <a class="game-mode-button game-ctw" href="?s=ctw"></a>
            <a class="game-mode-button game-dtc" href="?s=dtc"></a>
            <a class="game-mode-button game-dtm" href="?s=dtm"></a>
            <a class="game-mode-button game-koth" href="?s=koth"></a>
            <a class="game-mode-button game-cp" href="?s=cp"></a>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Deathmatch</div>
            <a class="game-mode-button game-blitz" href="?s=blitz"></a>
            <a class="game-mode-button game-rage" href="?s=rage"></a>
            <a class="game-mode-button game-ffa" href="?s=ffa"></a>
            <a class="game-mode-button game-skywars" href="?s=skywars"></a>
            <a class="game-mode-button game-tdm" href="?s=tdm"></a>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Competitive</div>
            <a class="game-mode-button game-ranked" href="?s=ranked"></a>
            <a class="game-mode-button game-tournament" href="?s=tournament"></a>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Other</div>
            <a class="game-mode-button game-all" href="?s="></a>
            <a class="game-mode-button game-arcade" href="?s=arcade"></a>
            <a class="game-mode-button game-gs" href="?s=gs"></a>
            <a class="game-mode-button custom-starred" href="?s=starred"></a>
            <span class="game-mode-button">Licenses:</span>
            <a class="game-mode-button license-by-nc-sa" href="?s=by-nc-sa"></a>
            <a class="game-mode-button license-by-sa" href="?s=by-sa"></a>
        </div>
    </div>
    <div class="total-maps center"></div>
    <div id="maps-output">
        <div class="dynamic">
        {{#with data}}
        {{#maps}}
            {{> map}}
        {{/maps}}
        {{/with}}
        </div>
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4">
                <span class="btn map-link-disabled map-button"><i class="fa fa-download"></i> Download starred maps</span>
            </div>
            <div class="col-md-4"></div>
        </div>
    </div>
    <div class="modal fade" id="download-starting-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Your download will begin shortly...</h4>
                </div>
                <div class="modal-body">
                    Please wait while we compile your download.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="download-complete-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Your download has begun...</h4>
                </div>
                <div class="modal-body">
                    Thank you for downloading this map from ResourcePile and supporting free public maps as well as the map authors.<br><br>
                    This map is licensed undera Creative Commons license which has been included in your download. Please respect this license and the wishes of the map authors as this project would not be here without them.
                    <hr>
                    You currently have <span id="api-request-remaining"></span> out of <span id="api-request-limit"></span> requests left to the GitHub API.<br>
                    This means that you can download approximately <spawn id="api-request-approximate"></spawn> more maps before you must wait an hour for the limit to reset.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="download-error-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Your download filed...</h4>
                </div>
                <div class="modal-body">
                    Something went wrong while compiling your download. Please try again, but if the issue persists please report an issue on our <a href="https://github.com/MCResourcePile/MCResourcePile.github.io/issues/new" target="_blank">Issues Tracker</a>.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="download-rate-limit-message" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">You've hit the rate limit</h4>
                </div>
                <div class="modal-body">
                    Looks like you've hit GitHub's rate limit. Sadly there isn't anything we can do about that at the moment, but we are looking for solutions. Please try again in an hour.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var data=location.search;
    if(data) {
        data=location.search.substring(1);
        data=data.split('&');
        var pairs={};
        for(var i=0; i<data.length; i++){
            var tmp=data[i].split('=');
            pairs[tmp[0]]=tmp[1];
        }
        var f = document.search_form;
        for (var i in pairs) {
            if(f.elements[i]) {f.elements[i].value = pairs[i];}
        }
    }
</script>
{{> footer}}
</body>
</html>
