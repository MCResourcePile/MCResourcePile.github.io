{{> header}}
<div class="container">
    <div class="content-header">
        {{> alert}}
		<div class="content-title">Updates</div>
		<div class="content-subtitle">
			Recent updates and announcements from ResourcePile.
		</div>
	</div>
    <div id="post-output">
        {{#with data}}
            {{#posts}}
            {{#unless hidden}}
            <post id="{{id}}" class="post-thumbnail {{#if important}}post-thumbnail-important{{/if}}">
                <div class="post-header">{{#if important}}<i class="fa fa-bookmark" aria-hidden="true"></i> {{/if}}<a href="#{{id}}" class="post-header">{{#if heading}}{{heading}}{{else}}Untitiled announcement{{/if}}</a></div>
                <div class="post-details">Posted by <img class="post-author-avatar" src="https://crafatar.com/avatars/{{#if author}}{{author}}{{else}}MHF_Exclamation{{/if}}?size=12&overlay"> {{#if author}}<a href="https://mcresourcepile.github.io/staff/{{author}}">{{author}}</a>{{else}}<span class="position-manager">ResourcePile</span>{{/if}} {{#if date}}<span class="convert" data-toggle="tooltip" data-placement="top" title="Unknown date">{{date}}</span>{{/if}}</div>
                <div class="post-body">{{{content}}}</div>
                {{#if buttons}}
                <div class="post-links">
                    {{#buttons}}
                    <a href="{{url}}" target="_blank" class="btn btn-sm map-link post-button" role="button">{{#if details}}{{details}}{{else}}Learn more{{/if}}</a>
                    {{/buttons}}
                </div>
                {{/if}}
            </post>
            {{/unless}}
            {{/posts}}
        {{/with}}
    </div>
</div>
<script>
    $(function () {
        $('.convert').each(function (index, dateElem) {
            var $dateElem = $(dateElem);
            var relative = moment($dateElem.text(), "MM-DD-YYYY").fromNow();
            var exact = moment($dateElem.text(), 'MM-DD-YYYY').format('MMMM D, YYYY');
            $dateElem.text(relative);
            $dateElem.prop('title', exact);
        });
        
        $('[data-toggle="tooltip"]').tooltip();
        
        $('#post-output').easyPaginate({
            paginateElement: 'post',
            elementsPerPage: 6,
        });
    }); 
</script>
{{> footer}}
</body>
</html>
